[15.08.2021]
После принятия ставки, если сразу перейти в историю, она там может не отображатся
Попробую добавить задержку в 1 секунду
Задержка не всегда помогает, всё равно ставка иногда не успевает(?) появится в истории
Пока такая схема (история - это на сайте, сохранённая история - это в боте worker.GetSessionData('1xbet.LastBetsIds'))
1. Нет сохранённой истории при открытии, считываем и сохраняем её
2. При успешной ставке, запоминаем номер купона, смотрим историю
2.1 Если номера купона нет в истории, очищаем сохранённую историю, таким образом при следующей попытке она будет обновлена
2.2 Если номер купона есть в истории, просто обновляем историю
3. При ошибке ставки, смотрим историю
3.1 Если история пустая, значи ставка не принята (в теории она может не успеть попасть?)
3.2 Если история не пустая, смотри номер купона последней ставки
3.2.1 Если этот номер был в сохранённой истории, значит ставка не принята (в теории она может не успеть попасть?)
3.2.1.1 Можно обновить сохранённую историю
3.2.2 Если этого номера не было, значит ставка принята (может ли быть неактуальная созранённая история?)
3.2.2.1 Обновить сохранённую историю

[18.08.2021]
Была проблема с вариантом 2.1
Была успешная ставка, но в истории она не успела появиться. Очистили сохранённую историю
Но в следующей попытке, когда заново проверялась история на сайте, та успешная всё ещё не успела появится
Соответственно она не попала в сохранённую историю
Далее была ошибка ставки, и пошла проверка в истории на сайте
И в итоге там уже появилась та первая успешная
Но так как она так не попала сохранённую историю, посчиталось, что сейчас ошибочная ставка как бы поставилась
Попробую привязаться к последнему номеру купона как к числу. И сравнивать больше/меньше
